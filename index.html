<!DOCTYPE html>
<html>
  <head>
    <title>Web Compiler</title>
    <link rel="stylesheet" type="text/css" href="styles.css" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css"
    />
    <script
      src="https://kit.fontawesome.com/0000f17b81.js"
      crossorigin="anonymous"
    ></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto&display=swap"
      rel="stylesheet"
    />
  </head>
  <body>
    <nav>
      <ul class="nav-links">
        <div id="title" style="margin-right: auto;">
          <li>
            <a href="#"><h2>Web Compiler</h2> </a>
          </li>
        </div>

        <div class="btnContainer" style="margin: 0 auto;">
          <div onclick="toggles(this)" id="Html" class="btnTab Hbtn active">
            HTML
          </div>
          <div onclick="toggles(this)" id="Css" class="btnTab Cbtn">CSS</div>

          <div onclick="toggles(this)" id="Js" class="btnTab Jbtn">
            JavaScript
          </div>

          <div onclick="toggles(this)" id="Output" class="btnTab Obtn active">
            OUTPUT
          </div>
        </div>

        <div class="logoutBtn" style="margin-left: auto;">
          <li>
            <button type="button">
              <i style="margin-right: 3px;" class="fas fa-users fa-lg"></i
              >Logout
            </button>
          </li>
        </div>
      </ul>
    </nav>

    <div id="bodyContainer">
      <div class="Panels">
        <span>HTML</span>
        <textarea id="HtmlTextarea">Html</textarea>
      </div>
      <div class="Panels hidden" id="CssPanel">
        <span style="display: block;">CSS</span>
        <textarea id="CssTextarea">Css</textarea>
      </div>
      <div class="Panels hidden" id="JsPanel">
        <span style="display: block;">JavaScript</span>
        <textarea id="JsTextarea">Js</textarea>
      </div>

      <iframe class="Panels" id="OutputPanel"><span>Output</span></iframe>
    </div>

    <script type="text/javascript">
      function toggles(x) {
        var PanelName = x.id + "Panel";
        x.classList.toggle("active");
        var mainPanel = document.getElementById(PanelName);
        document.getElementById(PanelName).classList.toggle("hidden");
      }

      function UpdateValue() {
        var htmlContent = document.getElementById("HtmlTextarea").value;
        var CssContent = document.getElementById("CssTextarea").value;

        var frameObj = document.getElementById("OutputPanel");
        var JsContent = document
          .getElementById("OutputPanel")
          .contentWindow.eval(document.getElementById("JsPanel").value);

        var frameContent = (frameObj.contentWindow.document.body.innerHTML =
          "<html><head><style type='text/css'>" +
          CssContent +
          "</style></head><body>" +
          htmlContent +
          "</body></html>");
      }
      document.querySelectorAll("textarea").forEach((item) => {
        item.addEventListener("change", UpdateValue, false);
        item.addEventListener("keyup", UpdateValue, false);
        item.addEventListener("paste", UpdateValue, false);
        item.addEventListener("keydown", UpdateValue, false);
      });
    </script>
  </body>
</html>
